<style>
    .col-form-label, .profile .profile-edit label, .form-control{
        font-size:15px;
    }

    .custom-file{
        margin-right:100px;
    }

  
</style>
<div class="pagetitle">
    <h1><i class="fa fa-user"></i> Mon Profil</h1>
</div><!-- End Page Title -->       
        <section class="section profile">
            <div class="row">
                <div class="col-xl-4 col-lg-4 col-md-5 col-sm-12">
                    <div class="card">
                        <div class="     profile-card pt-4 d-flex flex-column align-items-center">
                             {% if ((profil is not null) and (profil.image != "")) %}
                            <img src="{{ app.request.getSchemeAndHttpHost() ~ asset('uploads/APP_' ~ application.id ~'/avatar/' ~ profil.image) }}" alt="Profile" class="rounded-circle img-responsive">
                            {% endif %}
                            <h2>{{profil.prenom}} {{profil.nom}}</h2>
                           {# <h3>{{profil.fonction}}</h3> #}
                        </div>
                    </div>
                </div>

                <div class="col-xl-8 col-lg-8 col-md-7 col-sm-12">
                    <div class="card">
                        <div class="card-body pt-3">
                        <!-- Bordered Tabs -->
                            <ul class="nav nav-tabs nav-tabs-bordered">
                                <li class="nav-item">
                                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview" id ="information">Information</button>
                                </li>

                                <li class="nav-item">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-edit" id ="update-information">Modifier</button>
                                </li>

                                <li class="nav-item">
                                    <button class="nav-link" data-bs-toggle="tab" id ="change-password" data-bs-target="#profile-change-password">Modifier le mot de passe</button>
                                </li>

                                {# <li class="nav-item">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-signature" id ="signature">Signature</button>
                                </li> #}
                            </ul>
                        <div class="tab-content pt-2">
                                <div class="tab-pane fade show active profile-overview" id="profile-overview">
                                    <h5 class="card-title fw-bold">Profile Details</h5> 

                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 col-sm-4 label-extranet">Nom</div>
                                        <div class="col-lg-9 col-md-8 col-sm-8 ">{{profil.nom}}</div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 col-sm-4 label-extranet">Prénom</div>
                                        <div class="col-lg-9 col-md-8 col-sm-8">{{profil.prenom}}</div>
                                    </div> 

                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 col-sm-4 label-extranet">Email</div>
                                        <div class="col-lg-9 col-md-8 col-sm-8">{{profil.email}}</div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 col-sm-4 label-extranet">Téléphone</div>
                                        <div class="col-lg-9 col-md-8 col-sm-8">{{profil.telephone}}</div>
                                    </div>

                                </div>
                                
                                <div class="tab-pane fade profile-edit pt-3" id="profile-edit">
                               
                                    {{ form_start(form, {'action': path('utilisateurs_profile'), 'method': 'POST', 'attr': {'id': 'editInfoBase', 'enctype':'multipart/form-data', 'class': 'form-horizontal'}}) }}
                                    {{ form_widget(form._token) }}
                               
                                    {% if ((profil is not null) and (profil.image != "")) %}
                                    <div class="row mb-3">
                                        <label for="profileImage" class="col-md-4 col-lg-3 col-form-label">Photo</label>
                                        <div class="col-md-8 col-sm-4">
                                            <img src="{{ app.request.getSchemeAndHttpHost() ~ asset('uploads/APP_' ~ application.id ~'/avatar/' ~ profil.image) }}" alt="Profile">
                                            {{ form_widget(form.imageFile) }}
                                            {{ form_errors(form.imageFile) }}
                                        </div>
                                    </div>
                                    {% else %}
                                <div class="row mb-3">
                                    <label for="profileImage" class="col-md-4 col-lg-3 col-form-label">Photo</label>
                                      
                                    <div class="col-md-8 col-lg-9">
                                        {{ form_widget(form.imageFile) }}
                                        {{ form_errors(form.imageFile) }}
                                    </div>
                                </div>
                                {% endif %}
                                <div class="row mb-3">
                                    <label for="profil_civilite" class="col-md-4 col-lg-3 col-form-label">Civilité</label>
                                    <div class="col-md-8 col-lg-9">
                                     {{ form_widget(form.civilite) }}
                                    
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="profil_nom" class="col-md-4 col-lg-3 col-form-label">Nom</label>
                                    <div class="col-md-8 col-lg-9">
                                        {{ form_widget(form.nom) }}
                                          
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="profil_prenom" class="col-md-4 col-lg-3 col-form-label">Prénom</label>
                                    <div class="col-md-8 col-lg-9">
                                             {{ form_widget(form.prenom) }}
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="profil_email" class="col-md-4 col-lg-3 col-form-label">Email</label>
                                    <div class="col-md-8 col-lg-9">
                                            {{ form_row(form.email, { 'attr': {'class': 'form-control'}, 'label': false }) }}
                                         
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="profil_telephone" class="col-md-4 col-lg-3 col-form-label">Telephone</label>
                                    <div class="col-md-8 col-lg-9">
                                     {{ form_widget(form.telephone) }}
                                      
                                    </div>
                                </div>

                                

                                <div class="text-center">
                                <button type="submit" class="btn btn-primary">Modifier</button>
                                </div>
                                {{ form_end(form) }}
                            

                                </div>

                                

                                <div class="tab-pane fade pt-3" id="profile-change-password">
                                <!-- Change Password Form -->
                                    {{ form_start(formAcces, {'action': path('utilisateurs_profile'), 'method': 'POST', 'attr': {'id': 'editInfoAcces', 'enctype':'multipart/form-data', 'class': 'form-horizontal'}}) }}
                               
                                    {{ form_widget(formAcces._token) }}
                                    <div class="row mb-3">
                                        <label for="email" class="col-md-4 col-lg-3 col-form-label">Email</label>
                                        <div class="col-md-8 col-lg-9">
                                                {{ form_row(formAcces.email, { 'attr': {'class': 'form-control'}, 'label': false }) }}
                                    
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <label for="newPassword" class="col-md-4 col-lg-3 col-form-label">Nouveau mot de passe</label>
                                        <div class="col-md-8 col-lg-9">
                                                <input type="password" id="acces_extranet_new_password" name="acces_extranet_new_password" class="form-control" value="">
                                        </div>
                                    </div>

                                    <div class="text-center">
                                        <button class="btn btn-success">Modifier mot de passe</button>
                                    </div>
                            
                                {{ form_end(formAcces) }}
                            
                              
                                </div>

                                {# <div class="tab-pane fade pt-3" id="profile-signature">
                                        <div class="row mb-3">
                                            {% if profil.signature is not null and profil.signature != "" %}
                                                <div class="col-md-6 col-sm-6">
                                                        <img id="uploadedSignature" src="{{ app.request.getSchemeAndHttpHost() ~ asset('uploads/APP_' ~ app.user.appActive.id ~ '/signature/' ~ profil.signature ) }}" alt="Signature">
                                                </div>
                                            {% endif %}
                                        <div class="{% if profil.signature is not null %}col-md-6 col-sm-6 {% else %}col-md-12 col-sm-12 text-center{% endif %}">
                                                <canvas id="signatureCanvas" class="w-100" height="200"></canvas>
                                        </div>
                                        
                                        <div class="text-center">
                                            <form id="upload_signature" method="POST" enctype="multipart/form-data">
                                                <div class="d-flex flex-row justify-content-center">
                                                    <div class="p-1">
                                                        <button type="button" class="btn btn-danger" onclick="clearSignature()">Effacer</button>
                                                    </div>
                                                    <div class="p-1">
                                                        <button type="button" class="btn btn-success" onclick="saveSignature({{utilisateurId}})">Enregistrer</button>
                                                    </div>
                                                    <div class="p-1">
                                                        <label style = "display: inline-block;" class="btn btn-primary" for="profil_signature" title="Upload signature"><i class="bi bi-upload"></i></label>
                                                        <input  style="display: none;" type="file" id="profil_signature" name="profil_signature">
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div> #}

                        </div><!-- End Bordered Tabs -->

                        </div>
                        </div>

                        </div>
                </div>
</section>

    

{% block javascripts %}

   
    <script type="text/javascript">
        /*function loadNotification() {
                 $('#detailsNotification').empty();
                {% set notifications = app.request.attributes.get('_notifications') %}
                var notificationsTab = {{ notifications|json_encode|raw }}; //tableau
                {% if notifications is not empty %}
                    $('#nombreNotification').text(notificationsTab[0].nombreNotification);
                        var listeVoirTout = $('<li class="dropdown-header"/>')
                        var txt = $('<span>Vous avez ' + notificationsTab[0].nombreNotification + ' nouveau notification</span>');
                        listeVoirTout.append(txt);
                        var linkVoirTout = $('<a href="#" onClick="return showTabAssiduite({{app.user.eleveResponsables[0].affaire.id}})"/>');
                        var spanVoirTout = $('<span class="badge rounded-pill bg-primary p-2 ms-2">Voir tout</span>'); 
                        linkVoirTout.append(spanVoirTout);
                        listeVoirTout.append(linkVoirTout);
                            $('#detailsNotification').append(listeVoirTout);
                            var divider = $('<li/>');
                        var hr = $('<hr class="dropdown-divider">');
                        divider.append(hr);
                        $('#detailsNotification').append(divider);
                    for(var i = 0; i<notificationsTab.length; i++ ) {
                        var iClass = "";
                        switch(notificationsTab[i].statutEleveCours) {
                        case "Absent": 
                            iClass = "bi bi-x-circle text-danger";
                            break;
                        case "Présent": 
                            iClass = "bi bi-check-circle text-success";
                            break;
                        case "En retard": 
                            iClass = "bi bi-exclamation-circle text-warning";
                            break;
                        }
                        
                        var liEltRetard = $('<li class="notification-item" />');
                        var iEltRetard = $('<i class="'+iClass+'" />'); 
                        liEltRetard.append(iEltRetard);
                        var divEletRetard = $('<div />');
                        var h4EltRetard = $('<h4>'+notificationsTab[i].coursName+'</h4>');
                        var pEltRetard = $('<p>'+notificationsTab[i].dateCours+' '+notificationsTab[i].heureDebutCours+' au '+notificationsTab[i].heureFinCours+'</p>');
                        var pMinEltRetard = $('<p>'+notificationsTab[i].statutEleveCours+'</p>');
                        divEletRetard.append(h4EltRetard);
                        divEletRetard.append(pEltRetard);
                        divEletRetard.append(pMinEltRetard);
                        liEltRetard.append(divEletRetard);

                        var dividerRetard = $('<li/>');
                        var hrRetard = $('<hr class="dropdown-divider">');
                        dividerRetard.append(hrRetard);
                    $('#detailsNotification').append(liEltRetard);
                    $('#detailsNotification').append(dividerRetard);

                    }    
                    var listeVoirToutFooter = $('<li class="dropdown-footer"/>')
                    var linkVoirToutFooter = $('<a href="#" onClick="return showTabAssiduite({{app.user.eleveResponsables[0].affaire.id}})"/>');
                    var txtFooter = $('<span>Voir tout</span>');
                    linkVoirToutFooter.append(txtFooter);
                    listeVoirToutFooter.append(linkVoirToutFooter);
                        $('#detailsNotification').append(listeVoirToutFooter);
                {% else %}
                    $('#nombreNotification').text("");    
                {% endif %}
            }*/
        $(document).ready(function() {
            $('#tab-profile').addClass('active');

            $('#tab-fiche-fournisseur').removeClass('active').empty();
            $('#tab-quantite-vendu').removeClass('active').empty();
            $('#tab-notification').removeClass('active').empty();
            $('#tab-historique-produit').removeClass('active').empty();
            $('#tab-historique-affaire').removeClass('active').empty();
            $('#tab-produit-date-peremption').removeClass('active').empty();
            $('#tab-stock').removeClass('active');
            $('#tab-inventaire-produit').css('display','none');

            $('.tab-user').removeClass('active');
            $('.tab-permission').removeClass('active');
            $('.tab-privilege').removeClass('active');
            $('.tab-cat-permission').removeClass('active');
            $('#tab-dashboard').removeClass('active');
            $('#tab-utilisateur').removeClass('active');
            $('#tab-permission').removeClass('active');
            $('#tab-privilege').removeClass('active');
            $('#tab-categorie-permission').removeClass('active');
            $('#tab-application').removeClass('active');
            $('.tab-categorie').removeClass('active');
            $('#tab-produit-categorie').removeClass('active');
            $('.tab-produit-categorie').removeClass('active');
            $('#tab-categorie').removeClass('active');
             $('#tab-compte_1').removeClass('active');
        $('#tab-compte_2').removeClass('active');
            $('#tab-produit-type').removeClass('active');
            $('.tab-import-produit').removeClass('active');
            $('#tab-import-produit').removeClass('active');
            $('#tab-transfert-produit').css('display', 'none');
            $('#affaires_client').removeClass('active').empty();
            $('#affaires_fournisseur').removeClass('active').empty();
            $('#tab-info-affaire').removeClass('active').empty();
            $('#tab-financier-affaire').removeClass('active').empty();
            $('#tab-fiche-client').removeClass('active').empty();
            $('#tab-facture').css('display', 'none');
            $('#tab-facture-affaire').css('display', 'none');
            $('#tab-nouveau-facture').css('display','none');
            $('#tab-devis').css('display','none');
            $('#tab-commande').css('display','none');
        $('#tab-echeance').css('display','none');

    });

    
    $(document).ready(function () {
            
      
       $('#editInfoBase').on('submit', function (e) {
            e.preventDefault();
            let form = $(this);
          
            // Create an FormData object
            let formData = new FormData(form[0]);
          
            $.ajax({
                url: form.attr('action'),
                type: form.attr('method'),
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                    var nextLink = $('#sidebar').find('li#profile').find('a');
                    setTimeout(function () {
                        toastr.options = {
                            closeButton: true,
                            progressBar: true,
                            showMethod: 'slideDown',
                            timeOut: 1000
                        };
                        toastr.success('Avec succèss', 'Enregistrement effectuée');

                        //$(".loadBody").css('display', 'none');

                    }, 800);
                    if (nextLink.length > 0) {
                        nextLink.click();
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    // Gérer l'erreur (par exemple, afficher un message d'erreur)
                    alert('Erreur lors de l\'ajout de la catégorie.');
                }
            });
        });

        $('#editInfoAcces').on('submit', function (e) {
            e.preventDefault();
            let form = $(this);
          
            // Create an FormData object
            let formData = new FormData(form[0]);
          
            $.ajax({
                url: form.attr('action'),
                type: form.attr('method'),
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                    var nextLink = $('#sidebar').find('li#profile').find('a');
                    setTimeout(function () {
                        toastr.options = {
                            closeButton: true,
                            progressBar: true,
                            showMethod: 'slideDown',
                            timeOut: 1000
                        };
                        toastr.success('Avec succèss', 'Enregistrement effectuée');

                        //$(".loadBody").css('display', 'none');

                    }, 800);
                    if (nextLink.length > 0) {
                        nextLink.click();
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    // Gérer l'erreur (par exemple, afficher un message d'erreur)
                    alert('Erreur lors de l\'ajout de la catégorie.');
                }
            });
        });
    });
        $(document).ready(function () {
            
            /*loadNotification();
            $('#profil_nom').parent().removeClass('col-sm-10');
            $('#profil_nom').parent().addClass('col-sm-12');
            $('#profil_nom').parent().parent().children(':first-child').remove();

            $('#profil_ville').parent().removeClass('col-sm-10');
            $('#profil_ville').parent().addClass('col-sm-12');
            $('#profil_ville').parent().parent().children(':first-child').remove();

            $('#profil_fonction').parent().removeClass('col-sm-10');
            $('#profil_fonction').parent().addClass('col-sm-12');
            $('#profil_fonction').parent().parent().children(':first-child').remove();

            $('#profil_linkedin').parent().removeClass('col-sm-10');
            $('#profil_linkedin').parent().addClass('col-sm-12');
            $('#profil_linkedin').parent().parent().children(':first-child').remove();

            $('#profil_skype').parent().removeClass('col-sm-10');
            $('#profil_skype').parent().addClass('col-sm-12');
            $('#profil_skype').parent().parent().children(':first-child').remove();

            $('#profil_telephone').parent().removeClass('col-sm-10');
            $('#profil_telephone').parent().addClass('col-sm-12');
            $('#profil_telephone').parent().parent().children(':first-child').remove();

            $('#profil_portable').parent().removeClass('col-sm-10');
            $('#profil_portable').parent().addClass('col-sm-12');
            $('#profil_portable').parent().parent().children(':first-child').remove();

            $('#profil_mail').parent().removeClass('col-sm-10');
            $('#profil_mail').parent().addClass('col-sm-12');
            $('#profil_mail').parent().parent().children(':first-child').remove();
            
            $('#profil_prenom').parent().removeClass('col-sm-10');
            $('#profil_prenom').parent().addClass('col-sm-12');
            $('#profil_prenom').parent().parent().children(':first-child').remove();

            $('#profil_civilite').parent().removeClass('col-sm-10');
            $('#profil_civilite').parent().addClass('col-sm-12');
            $('#profil_civilite').parent().parent().children(':first-child').remove();

            $('#acces_extranet_email').parent().removeClass('col-sm-10');
            $('#acces_extranet_email').parent().addClass('col-sm-12');
            $('#acces_extranet_email').parent().parent().children(':first-child').remove();


            var defaultSelectedCollaborateur = "{{ app.user.id }}";
            //$('.chosen-select').chosen({width: "100%"});
            $("#collaborateurUtilisateur").val(defaultSelectedCollaborateur);
            $('#collaborateurUtilisateur').trigger("chosen:updated");*/
        });

        function showTab(onglet, containerSelector) {

            $(".loadBody").css('display', 'block');

            $.ajax({
                type: 'post',
                url: '/gomyclic/profil/show-tab/from-ajax',
                data: { onglet:  onglet},
                success: function (result) {
                    $(containerSelector).empty();
                    $(containerSelector).append(result);

                    $(".loadBody").css('display', 'none');

                    return false;

                },
                error: function () {
                    $(".loadBody").css("display", "none");
                    $(".chargementError").css("display", "block");
                    //alert('Erreur lors de l affichage onglet');
                }
            });

            return false;

        }

         

    </script>
    <script type="text/javascript">

        $(document).ready(function () {
            var linkDwnload = $(".vich-image").find("a");
            if (linkDwnload.length > 0) {
                linkDwnload.remove();
            }
            var eltFile = $(".vich-image");
            
            
            if (eltFile.length > 0) {
                eltFile.addClass("row mt-3");
                var divCustomFile = $('<div class="custom-file col-md-1" style="margin-left: 0.8em;"></div>');
                //eltFile.children(".custom-file").addClass('col-md-1');
                //eltFile.children(".custom-file").css("margin-left","0.8em");
               
                //eltFile.children(".form-group").addClass('col-md-1 my-auto');
                //eltFile.children(".custom-file").children(".custom-file-label").remove();
                var link = $('<label class="btn btn-outline-secondary" for="profil_imageFile_file" title="Téléchargez votre photo de profil"><i class="bi bi-upload"></i></label>');
                divCustomFile.append(link);
                var inputFile = $("#profil_imageFile_file");
                divCustomFile.append(inputFile);
                eltFile.append(divCustomFile);
                var divCustomSuppression = $('<div class="form-group row col-md-1 my-auto"></div>');
                 var divSm2 = $('<div class="col-sm-2"></div>');
                  var divSm10 = $('<div class="col-sm-10"></div>');
                var divSm10 = $('<div class="col-sm-10"></div>');
                var divFormCheck = $('<div class="form-check"></div>');
                divCustomSuppression.append(divSm2);
                {% if ((profil is not null) and (profil.image != "")) %}
                eltFile.children(":first").remove();;
              
                var inputFileDelete = $('<input type="checkbox" id="profil_imageFile_delete" name="profil[imageFile][delete]" class="form-check-input" value="1">');
                //var labelDelete = $('<label class="form-check-label" for="profil_avatar_delete">Supprimer?</label>');
                 var deleteLink = $('<label href="#" class="btn btn-danger btn-sm" title="Supprimer l\'image de profil"><i class="bi bi-trash"></i></label>');
                
                 
                 
                  divFormCheck.append(inputFileDelete);
                  divFormCheck.append(deleteLink);
                {% endif %}
                  
                  divSm10.append(divFormCheck);
                   divCustomSuppression.append(divSm10);
               eltFile.append(divCustomSuppression);
                //eltFile.children(".custom-file").prepend(link);

            }
            $('#profil_imageFile_file').css("display", "none");
            $('#profil_imageFile_file').on('change', function (e) {
// get the file name
// alert(index);
var fileName1 = $(this).val();
// nom avec chemin
// var fileName1 = e.target.files[0].name; // nom reel
// replace the "Choose a file" label
let filename = $(this)[0].value; // nom reel
const idx = filename.lastIndexOf("\\");
filename = filename.substr(idx + 1);
//$('#isChangePiece').val("true");
$('label[for=\'profil_imageFile_file\']').html(filename);
// /$('#dossier_pieces_pieces_'+(k)).parent().before('<input type="hidden" value ="'+k+'" id ="hidden_'+k+'"/>')
// $(this).next('.custom-file-label').html(fileName);file:///D:\Navalona/FREE/OATF/Alignement/identiteTerrain.PNG
//$(this).next('.custom-file-label').next('a').remove();
//$(this).next('.custom-file-label').after(' <a href="file:///' + fileName1 + '" target="_blank">Voir</a>');

});

      
            var anchorName = document.location.hash.substring(1);

          
            $('.chosen-select').chosen({width: "100%"});

        });

        $('a.stretched-link').click(function () {
            if ($('#mdpUser').attr('type') == 'password') {
                $('#mdpUser').attr('type', 'text');
            } else {
                $('#mdpUser').attr('type', 'password');
            }
        });

       

    </script>
    <script>
    /*var canvas = document.getElementById('signatureCanvas');
    var ctx = canvas.getContext('2d');
    var isDrawing = false;
    var lastX = 0;
    var lastY = 0;

    canvas.addEventListener('mousedown', function(e) {
        isDrawing = true;
        [lastX, lastY] = [e.offsetX, e.offsetY];
    });

    canvas.addEventListener('mousemove', function(e) {
        if (isDrawing) {
            drawLine(lastX, lastY, e.offsetX, e.offsetY);
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }
    });

    canvas.addEventListener('mouseup', function() {
        isDrawing = false;
    });*/

    function drawLine(x1, y1, x2, y2) {
        ctx.beginPath();
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        ctx.strokeStyle = '#000';
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.closePath();
    }

    function clearSignature() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    function saveSignature(utilisateurId) {
        var dataURL = canvas.toDataURL();
        // Vous pouvez utiliser cette URL de données pour enregistrer la signature ou la traiter.
       // Dessinez quelque chose sur le canvas (pour cet exemple, un carré rouge)
       
        // Obtenez les données de l'image du canvas
        if (dataURL.length != 2518) {
            $(".loadBody").css('display', 'block');
            $.ajax({
            type: 'post',
            url: '/extra-net/cfa/signature/'+utilisateurId,
            data: {signature: dataURL},
            success: function (response) {
            var nextLink = $('.sidebar-nav').find('li#profil').find('a');
                if(nextLink.length > 0){
                    nextLink.click();
                }

                $(".loadBody").css('display', 'none');
            },
            error: function () {
                $(".loadBody").css('display', 'none');
                $(".chargementError").css('display', 'block');
            }

        });
        } else {
            let file = $('#profil_signature');

            let formData = new FormData();
            //formData.append('signature', false);
            formData.append('file',file[0].files[0]);
            $(".loadBody").css('display', 'block');
            $.ajax({
            type: 'post',
            url: '/extra-net/cfa/signature/'+utilisateurId,
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
            var nextLink = $('.sidebar-nav').find('li#profil').find('a');
                if(nextLink.length > 0){
                    nextLink.click();
                }

                $(".loadBody").css('display', 'none');
            },
            error: function () {
                $(".loadBody").css('display', 'none');
                $(".chargementError").css('display', 'block');
            }

            });
        }
        return false;
    }

</script>

{% endblock %}